# 指尖书写 (Finger Tip Writing) ✍️✨

一个基于 Web 摄像头的 AR 指尖书写应用，利用计算机视觉技术捕捉手部动作，让你在空气中挥洒创意。

无需额外硬件，只需打开浏览器，捏合手指即可开始书写！

## ✨ 演示效果 (Demo)

<div align="center">
  <img src="demo.gif" width="100%" alt="指尖书写演示" />
</div>

## 🌟 核心功能

*   **自然交互**：采用“捏合落笔”手势（食指与拇指捏合），模拟真实握笔体验，解决空中书写无法断笔的痛点。
*   **精准追踪**：基于 MediaPipe Hands 实现高精度手部关键点检测。
*   **笔迹平滑**：内置指数移动平均 (EMA) 算法和迟滞阈值 (Hysteresis) 机制，消除抖动，让线条圆润流畅。
*   **创作记录**：支持一键 **录制创作过程** (WebM) 和 **保存高清截图** (PNG)。
*   **个性化设置**：自由调节画笔颜色、粗细以及识别灵敏度，适应不同光照环境。

## 🛠 技术原理概述

本项目是一个纯前端应用，主要依赖以下技术栈：

1.  **手部追踪 (Hand Tracking)**
    *   使用 Google 的 **MediaPipe Hands** 机器学习模型，实时从摄像头视频流中提取 21 个手部 3D 关键点。
    *   核心关注 **食指指尖 (Index Tip, ID:8)** 和 **拇指指尖 (Thumb Tip, ID:4)**。

2.  **手势状态机 (Gesture State Machine)**
    *   通过计算食指与拇指尖的欧几里得距离来判断书写状态。
    *   **迟滞比较器 (Hysteresis Comparator)**：设置了 `Start` (0.05) 和 `Stop` (0.08) 两个不同的阈值，防止在临界点产生“断触”抖动。
    *   **状态缓冲 (State Buffer)**：在检测丢失或手指瞬间松开时引入帧缓冲，确保快速书写时的连贯性。

3.  **绘图渲染 (Rendering)**
    *   **双层 Canvas 设计**：
        *   底层：渲染经过镜像处理的摄像头视频流。
        *   上层：渲染笔迹和 UI 指示器（离屏 Canvas 技术实现笔迹持久化）。
    *   **书写点映射**：书写坐标并非单一指尖，而是食指与拇指的**中心点**，符合捏合书写的视觉直觉。

4.  **平滑算法 (Smoothing)**
    *   对原始坐标应用 **指数移动平均 (Exponential Moving Average)**，公式：$P_{current} = P_{last} \times (1 - \alpha) + P_{raw} \times \alpha$。有效过滤了手部生理性微颤和检测噪声。

## 🚀 快速开始

本项目是一个静态网页，但由于浏览器安全策略（访问摄像头），需要通过本地服务器运行。

### 方法 1: 使用 Python (推荐)

如果你安装了 Python 3：

```bash
# 进入项目目录
cd finger_tip_writing

# 启动 HTTP 服务器
python3 -m http.server 8000
```

然后在浏览器打开：[http://localhost:8000](http://localhost:8000)

### 方法 2: 使用 VS Code Live Server

1.  安装 VS Code 插件：**Live Server**。
2.  右键点击 `index.html`，选择 **Open with Live Server**。

### 方法 3: 使用 Node.js

如果你有 `http-server` 或其他静态服务工具：

```bash
npx http-server .
```

## 📖 操作指南

1.  **允许权限**：首次打开请允许浏览器访问摄像头。
2.  **悬停移动**：张开手掌，移动手部。你会看到**食指**和**拇指**上有跟随的空心圈。
3.  **捏合书写**：将**食指**和**拇指**指尖捏合在一起。此时双指中间会出现**红色实心点**，表示正在书写。
4.  **功能控制**：
    *   **灵敏度**：光线太强或太暗导致识别不准？尝试调节“灵敏度”滑块。
    *   **录制**：点击“开始录制”，完成后会自动下载视频文件。

## ⚠️ 注意事项

*   **光线环境**：请确保环境光线充足且均匀。避免强逆光或强光直射摄像头，这会导致 AI 无法识别手部。
*   **背景干扰**：复杂的背景可能会稍微影响识别精度，简洁的背景效果最佳。
*   **浏览器支持**：建议使用最新版本的 Chrome, Edge 或 Firefox。

## 📄 License

MIT License
